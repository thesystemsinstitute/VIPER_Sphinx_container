Sphinx-AutoAPI Tutorial
=======================

.. note::
   
   **Package Resources:**
   
   - `PyPI Package <https://pypi.org/project/sphinx-autoapi/>`_
   - `API Documentation <../../pdoc/sphinx_autoapi/index.html>`_
   - `Manual <https://sphinx-autoapi.readthedocs.io/en/latest/>`_

.. contents:: Table of Contents
   :local:
   :depth: 2

This tutorial demonstrates how to use sphinx-autoapi to automatically generate API documentation from your source code.

What is Sphinx-AutoAPI?
------------------------
sphinx-autoapi is a Sphinx extension that provides:

- Automatic API documentation generation
- No imports required
- Works with uninstallable code
- Multiple language support (Python, JavaScript, Go, .NET)
- Customizable templates
- Type annotation support
- Better performance than autodoc
- Clean separation
- Consistent output
- Template customization

This generates complete API documentation by parsing source code directly without importing it.

The sphinx-autoapi extension automatically generates comprehensive API documentation by parsing source code, supporting Python, .NET, JavaScript, and Go.


Installation
------------

sphinx-autoapi is already installed in this container. To verify:

.. code-block:: bash

   docker run --rm kensai-sphinx:latest python -c "import autoapi; print('Installed')"

Configuration
-------------

Basic Setup
~~~~~~~~~~~

Add to your ``conf.py``:

.. code-block:: python

   extensions = [
       'autoapi.extension',
   ]
   
   # AutoAPI configuration
   autoapi_dirs = ['../mypackage']
   autoapi_type = 'python'

Advanced Configuration
~~~~~~~~~~~~~~~~~~~~~~

.. code-block:: python

   extensions = ['autoapi.extension']
   
   # Directories to document
   autoapi_dirs = ['../mypackage']
   
   # Language type
   autoapi_type = 'python'
   
   # Output directory (relative to source)
   autoapi_root = 'api'
   
   # Template directory
   autoapi_template_dir = '_autoapi_templates'
   
   # Options
   autoapi_options = [
       'members',
       'undoc-members',
       'show-inheritance',
       'show-module-summary',
       'special-members',
       'imported-members',
   ]
   
   # Ignore patterns
   autoapi_ignore = [
       '*/migrations/*',
       '*tests/*',
       '*test_*.py',
   ]
   
   # Keep generated files
   autoapi_keep_files = True
   
   # Generate API docs
   autoapi_generate_api_docs = True
   
   # Add module names
   autoapi_add_toctree_entry = True
   
   # Python-specific settings
   autoapi_python_class_content = 'both'  # both, class, init
   autoapi_python_use_implicit_namespaces = False
   
   # Member ordering
   autoapi_member_order = 'groupwise'  # alphabetical, groupwise, bysource

Basic Usage
-----------

Generate API Documentation
~~~~~~~~~~~~~~~~~~~~~~~~~~~

Simply build your documentation:

.. code-block:: bash

   docker run --rm \
     -v $(pwd):/project \
     kensai-sphinx:latest \
     sphinx-build -b html /project/docs /project/docs/_build/html

AutoAPI automatically generates documentation from ``autoapi_dirs``.

Include in Toctree
~~~~~~~~~~~~~~~~~~

``docs/index.rst``:

.. code-block:: rst

   .. toctree::
      :maxdepth: 2
      
      installation
      usage
      api/index
      changelog

The ``api/index`` is automatically generated by AutoAPI.

Advanced Features
-----------------

Filter Members
~~~~~~~~~~~~~~

``docs/conf.py``:

.. code-block:: python

   def skip_member(app, what, name, obj, skip, options):
       """Skip private members starting with single underscore."""
       if name.startswith('_') and not name.startswith('__'):
           return True
       return skip
   
   def setup(app):
       app.connect('autoapi-skip-member', skip_member)

Custom Formatting
~~~~~~~~~~~~~~~~~

.. code-block:: python

   def autoapi_prepare_jinja_env(jinja_env):
       """Add custom filters to Jinja environment."""
       jinja_env.filters['custom_format'] = lambda x: x.upper()
   
   def setup(app):
       app.connect('autoapi-prepare-jinja-env', autoapi_prepare_jinja_env)

Type Hints Display
~~~~~~~~~~~~~~~~~~

.. code-block:: python

   # Show type hints in signatures
   autoapi_python_use_implicit_namespaces = True
   
   # Napoleon for Google/NumPy docstrings
   extensions = [
       'autoapi.extension',
       'sphinx.ext.napoleon',
   ]

Inheritance Diagrams
~~~~~~~~~~~~~~~~~~~~

.. code-block:: python

   extensions = [
       'autoapi.extension',
       'sphinx.ext.inheritance_diagram',
       'sphinx.ext.graphviz',
   ]
   
   # Enable in autoapi options
   autoapi_options = [
       'members',
       'show-inheritance',
       'show-inheritance-diagram',
   ]

Docker Integration
------------------

Build API Documentation
~~~~~~~~~~~~~~~~~~~~~~~

.. code-block:: bash

   docker run --rm \
     -v $(pwd):/project \
     kensai-sphinx:latest \
     sphinx-build -b html /project/docs /project/docs/_build/html

Multi-Stage Build
~~~~~~~~~~~~~~~~~

``Dockerfile``:

.. code-block:: dockerfile

   FROM python:3.11-alpine as builder
   
   # Install Sphinx and AutoAPI
   RUN pip install sphinx sphinx-autoapi
   
   # Copy source code
   COPY mypackage/ /src/mypackage/
   COPY docs/ /src/docs/
   
   # Build docs
   WORKDIR /src/docs
   RUN sphinx-build -b html . _build/html
   
   # Production image
   FROM nginx:alpine
   COPY --from=builder /src/docs/_build/html /usr/share/nginx/html

CI/CD Integration
-----------------

GitHub Actions
~~~~~~~~~~~~~~

.. code-block:: yaml

   name: Build API Documentation
   
   on:
     push:
       paths:
         - 'mypackage/**/*.py'
         - 'docs/**'
   
   jobs:
     build:
       runs-on: ubuntu-latest
       steps:
         - uses: actions/checkout@v3
         
         - name: Build Documentation
           run: |
             docker run --rm -v $(pwd):/project \
               kensai-sphinx:latest \
               sphinx-build -b html /project/docs /project/docs/_build/html
         
         - name: Deploy to GitHub Pages
           uses: peaceiris/actions-gh-pages@v3
           with:
             github_token: ${{ secrets.GITHUB_TOKEN }}
             publish_dir: ./docs/_build/html

Best Practices
--------------

1. **Write Comprehensive Docstrings**
   
   AutoAPI relies on good documentation

2. **Use Type Hints**
   
   Improves generated documentation

3. **Ignore Test Files**
   
   Keep API docs clean

4. **Customize Templates**
   
   Match your documentation style

5. **Keep Generated Files**
   
   For customization and debugging

6. **Use with Napoleon**
   
   Support Google/NumPy docstrings

Troubleshooting
---------------

Module Not Found
~~~~~~~~~~~~~~~~

**Solution:**

Check autoapi_dirs path:

.. code-block:: python

   autoapi_dirs = ['../mypackage']  # Relative to conf.py

No Documentation Generated
~~~~~~~~~~~~~~~~~~~~~~~~~~~

**Solution:**

Enable verbose output:

.. code-block:: bash

   sphinx-build -v -b html docs docs/_build/html

Check autoapi_ignore patterns.

Type Hints Not Showing
~~~~~~~~~~~~~~~~~~~~~~~

**Solution:**

.. code-block:: python

   autoapi_python_use_implicit_namespaces = True

Private Members Showing
~~~~~~~~~~~~~~~~~~~~~~~

**Solution:**

Remove 'private-members' from options:

.. code-block:: python

   autoapi_options = ['members', 'undoc-members']

Next Steps
----------

1. Configure autoapi_dirs
2. Set autoapi_options
3. Customize templates if needed
4. Build documentation
5. Review generated API docs


Practical Examples
------------------

Basic Configuration
-------------------

Python Project
~~~~~~~~~~~~~~

.. code-block:: python

   # conf.py
   extensions = [
       'autoapi.extension',
   ]
   
   autoapi_type = 'python'
   autoapi_dirs = ['../mypackage']

Multiple Packages
~~~~~~~~~~~~~~~~~

.. code-block:: python

   autoapi_dirs = [
       '../package1',
       '../package2',
       '../package3',
   ]

Output Configuration
--------------------

Custom Output Directory
~~~~~~~~~~~~~~~~~~~~~~~

.. code-block:: python

   # Generate to custom directory
   autoapi_root = 'api'  # docs/api/
   
   # Default is 'autoapi'

Template Customization
~~~~~~~~~~~~~~~~~~~~~~

.. code-block:: python

   autoapi_template_dir = '_templates/autoapi'

Generation Options
~~~~~~~~~~~~~~~~~~

.. code-block:: python

   # Don't generate if no changes
   autoapi_generate_api_docs = True
   
   # Keep generated files
   autoapi_keep_files = True
   
   # Add to toctree automatically
   autoapi_add_toctree_entry = True

Content Filtering
-----------------

Include/Exclude Patterns
~~~~~~~~~~~~~~~~~~~~~~~~

.. code-block:: python

   # Exclude patterns
   autoapi_ignore = [
       '*/tests/*',
       '*/migrations/*',
       '*/_private/*',
       '*/conftest.py',
   ]

Member Options
~~~~~~~~~~~~~~

.. code-block:: python

   # What to document
   autoapi_options = [
       'members',
       'undoc-members',
       'private-members',
       'show-inheritance',
       'show-module-summary',
       'special-members',
       'imported-members',
   ]

Skip Certain Members
~~~~~~~~~~~~~~~~~~~~

.. code-block:: python

   def skip_member(app, what, name, obj, skip, options):
       """Skip private and test members."""
       if name.startswith('_') and not name.startswith('__'):
           return True
       if name.startswith('test_'):
           return True
       return skip

   def setup(app):
       app.connect('autoapi-skip-member', skip_member)

Python-Specific Options
-----------------------

Type Annotations
~~~~~~~~~~~~~~~~

.. code-block:: python

   # Show type annotations
   autoapi_python_use_implicit_namespaces = True
   
   # Use napoleon for docstrings
   extensions = [
       'autoapi.extension',
       'sphinx.ext.napoleon',
   ]

Import Resolution
~~~~~~~~~~~~~~~~~

.. code-block:: python

   # Python class resolution
   autoapi_python_class_content = 'both'  # 'class', 'init', 'both'

Package Organization
~~~~~~~~~~~~~~~~~~~~

.. code-block:: python

   # Show module summary
   autoapi_member_order = 'groupwise'  # 'alphabetical', 'bysource'
   
   # Show inheritance
   autoapi_options = ['show-inheritance', 'show-module-summary']

Documentation Formats
---------------------

Google Style
~~~~~~~~~~~~

.. code-block:: python

   def example_function(param1, param2):
       """Example function with Google-style docstring.
       
       Args:
           param1 (str): The first parameter.
           param2 (int): The second parameter.
       
       Returns:
           bool: True if successful, False otherwise.
       
       Raises:
           ValueError: If param2 is negative.
       """
       pass

NumPy Style
~~~~~~~~~~~

.. code-block:: python

   def numpy_function(param1, param2):
       """Example function with NumPy-style docstring.
       
       Parameters
       ----------
       param1 : str
           The first parameter.
       param2 : int
           The second parameter.
       
       Returns
       -------
       bool
           True if successful, False otherwise.
       
       Raises
       ------
       ValueError
           If param2 is negative.
       """
       pass

Sphinx Style
~~~~~~~~~~~~

.. code-block:: python

   def sphinx_function(param1, param2):
       """Example function with Sphinx-style docstring.
       
       :param param1: The first parameter
       :type param1: str
       :param param2: The second parameter
       :type param2: int
       :return: True if successful, False otherwise
       :rtype: bool
       :raises ValueError: If param2 is negative
       """
       pass

Advanced Configuration
----------------------

Custom Rendering
~~~~~~~~~~~~~~~~

.. code-block:: python

   # conf.py
   def autoapi_prepare_jinja_env(jinja_env):
       """Customize Jinja environment."""
       jinja_env.globals['custom_filter'] = lambda x: x.upper()

   def setup(app):
       app.connect('autoapi-prepare-jinja-env', autoapi_prepare_jinja_env)

Modify Generated Content
~~~~~~~~~~~~~~~~~~~~~~~~~

.. code-block:: python

   def modify_autoapi_content(app, what, name, obj, options, lines):
       """Modify generated documentation."""
       if what == "class":
           lines.insert(0, ".. note:: This is an auto-generated class.")

   def setup(app):
       app.connect('autoapi-process-docstring', modify_autoapi_content)

Integration Examples
--------------------

With Type Hints
~~~~~~~~~~~~~~~

.. code-block:: python

   from typing import List, Dict, Optional

   class DataProcessor:
       """Process and transform data.
       
       Attributes:
           data: The data to process
           options: Processing options
       """
       
       def __init__(
           self,
           data: List[Dict[str, Any]],
           options: Optional[Dict[str, Any]] = None
       ):
           """Initialize the processor.
           
           Args:
               data: Input data list
               options: Optional configuration
           """
           self.data = data
           self.options = options or {}
       
       def process(self) -> List[Dict[str, Any]]:
           """Process the data.
           
           Returns:
               Processed data list
           """
           return self.data

With Dataclasses
~~~~~~~~~~~~~~~~

.. code-block:: python

   from dataclasses import dataclass, field
   from typing import List

   @dataclass
   class Config:
       """Application configuration.
       
       Attributes:
           name: Application name
           version: Version string
           features: Enabled features
       """
       name: str
       version: str = "1.0.0"
       features: List[str] = field(default_factory=list)

With Async Functions
~~~~~~~~~~~~~~~~~~~~

.. code-block:: python

   async def fetch_data(url: str, timeout: int = 30) -> dict:
       """Fetch data from URL asynchronously.
       
       Args:
           url: The URL to fetch from
           timeout: Request timeout in seconds
       
       Returns:
           The fetched data
       
       Raises:
           TimeoutError: If request exceeds timeout
       """
       pass

Package Structure Example
--------------------------

Complete Package
~~~~~~~~~~~~~~~~

.. code-block:: text

   mypackage/
   ├── __init__.py
   ├── core/
   │   ├── __init__.py
   │   ├── processor.py
   │   └── utils.py
   ├── api/
   │   ├── __init__.py
   │   ├── client.py
   │   └── endpoints.py
   └── exceptions.py

Configuration
~~~~~~~~~~~~~

.. code-block:: python

   # conf.py
   autoapi_type = 'python'
   autoapi_dirs = ['../mypackage']
   autoapi_root = 'api'
   
   autoapi_options = [
       'members',
       'undoc-members',
       'show-inheritance',
       'show-module-summary',
   ]
   
   autoapi_ignore = [
       '*/tests/*',
       '*/__pycache__/*',
   ]

Generated Structure
~~~~~~~~~~~~~~~~~~~

.. code-block:: text

   docs/
   ├── api/
   │   ├── mypackage/
   │   │   ├── index.rst
   │   │   ├── core/
   │   │   │   ├── index.rst
   │   │   │   ├── processor.rst
   │   │   │   └── utils.rst
   │   │   ├── api/
   │   │   │   ├── index.rst
   │   │   │   ├── client.rst
   │   │   │   └── endpoints.rst
   │   │   └── exceptions.rst
   │   └── index.rst
   └── index.rst

Cross-References
----------------

Linking to API
~~~~~~~~~~~~~~

.. code-block:: rst

   See :py:class:`mypackage.core.Processor` for details.
   
   Use :py:func:`mypackage.api.fetch_data` to retrieve data.
   
   Refer to :py:mod:`mypackage.core.utils` module.

Internal Links
~~~~~~~~~~~~~~

AutoAPI generates automatic cross-references:

.. code-block:: python

   class Manager:
       """Manage resources.
       
       Uses :class:`Processor` internally.
       Calls :func:`utils.validate` for validation.
       """
       pass

Customization
-------------

Custom Templates
~~~~~~~~~~~~~~~~

Create ``_templates/autoapi/python/class.rst``:

.. code-block:: jinja

   {{ obj.name }}
   {{ "=" * obj.name|length }}
   
   .. py:class:: {{ obj.id }}
   
      {{ obj.docstring }}
   
      {% if obj.bases %}
      **Bases:** {{ obj.bases|join(', ') }}
      {% endif %}
   
      {% block methods %}
      {% if obj.methods %}
      Methods
      -------
      {% for method in obj.methods %}
      .. automethod:: {{ method.id }}
      {% endfor %}
      {% endif %}
      {% endblock %}

Custom CSS
~~~~~~~~~~

.. code-block:: css

   /* _static/custom.css */
   .autoapi-section {
       border-left: 3px solid #2980b9;
       padding-left: 10px;
   }

Performance Optimization
------------------------

Caching
~~~~~~~

.. code-block:: python

   # Keep generated files for faster rebuilds
   autoapi_keep_files = True

Selective Generation
~~~~~~~~~~~~~~~~~~~~

.. code-block:: python

   # Only generate for specific modules
   autoapi_dirs = ['../mypackage/core']
   
   # Exclude large directories
   autoapi_ignore = ['*/vendor/*', '*/node_modules/*']

Best Practices
--------------

Documentation Quality
~~~~~~~~~~~~~~~~~~~~~

1. Write comprehensive docstrings
2. Include type hints
3. Document parameters and return values
4. Add usage examples
5. Document exceptions

Organization
~~~~~~~~~~~~

1. Use clear module structure
2. Group related functionality
3. Keep public API clean
4. Hide implementation details

Integration
~~~~~~~~~~~

1. Combine with manual documentation
2. Use cross-references
3. Add overview pages
4. Include tutorials


Practical Examples
------------------

Basic Configuration
-------------------

Python Project
~~~~~~~~~~~~~~

.. code-block:: python

   # conf.py
   extensions = [
       'autoapi.extension',
   ]
   
   autoapi_type = 'python'
   autoapi_dirs = ['../mypackage']

Multiple Packages
~~~~~~~~~~~~~~~~~

.. code-block:: python

   autoapi_dirs = [
       '../package1',
       '../package2',
       '../package3',
   ]

Output Configuration
--------------------

Custom Output Directory
~~~~~~~~~~~~~~~~~~~~~~~

.. code-block:: python

   # Generate to custom directory
   autoapi_root = 'api'  # docs/api/
   
   # Default is 'autoapi'

Template Customization
~~~~~~~~~~~~~~~~~~~~~~

.. code-block:: python

   autoapi_template_dir = '_templates/autoapi'

Generation Options
~~~~~~~~~~~~~~~~~~

.. code-block:: python

   # Don't generate if no changes
   autoapi_generate_api_docs = True
   
   # Keep generated files
   autoapi_keep_files = True
   
   # Add to toctree automatically
   autoapi_add_toctree_entry = True

Content Filtering
-----------------

Include/Exclude Patterns
~~~~~~~~~~~~~~~~~~~~~~~~

.. code-block:: python

   # Exclude patterns
   autoapi_ignore = [
       '*/tests/*',
       '*/migrations/*',
       '*/_private/*',
       '*/conftest.py',
   ]

Member Options
~~~~~~~~~~~~~~

.. code-block:: python

   # What to document
   autoapi_options = [
       'members',
       'undoc-members',
       'private-members',
       'show-inheritance',
       'show-module-summary',
       'special-members',
       'imported-members',
   ]

Skip Certain Members
~~~~~~~~~~~~~~~~~~~~

.. code-block:: python

   def skip_member(app, what, name, obj, skip, options):
       """Skip private and test members."""
       if name.startswith('_') and not name.startswith('__'):
           return True
       if name.startswith('test_'):
           return True
       return skip

   def setup(app):
       app.connect('autoapi-skip-member', skip_member)

Python-Specific Options
-----------------------

Type Annotations
~~~~~~~~~~~~~~~~

.. code-block:: python

   # Show type annotations
   autoapi_python_use_implicit_namespaces = True
   
   # Use napoleon for docstrings
   extensions = [
       'autoapi.extension',
       'sphinx.ext.napoleon',
   ]

Import Resolution
~~~~~~~~~~~~~~~~~

.. code-block:: python

   # Python class resolution
   autoapi_python_class_content = 'both'  # 'class', 'init', 'both'

Package Organization
~~~~~~~~~~~~~~~~~~~~

.. code-block:: python

   # Show module summary
   autoapi_member_order = 'groupwise'  # 'alphabetical', 'bysource'
   
   # Show inheritance
   autoapi_options = ['show-inheritance', 'show-module-summary']

Documentation Formats
---------------------

Google Style
~~~~~~~~~~~~

.. code-block:: python

   def example_function(param1, param2):
       """Example function with Google-style docstring.
       
       Args:
           param1 (str): The first parameter.
           param2 (int): The second parameter.
       
       Returns:
           bool: True if successful, False otherwise.
       
       Raises:
           ValueError: If param2 is negative.
       """
       pass

NumPy Style
~~~~~~~~~~~

.. code-block:: python

   def numpy_function(param1, param2):
       """Example function with NumPy-style docstring.
       
       Parameters
       ----------
       param1 : str
           The first parameter.
       param2 : int
           The second parameter.
       
       Returns
       -------
       bool
           True if successful, False otherwise.
       
       Raises
       ------
       ValueError
           If param2 is negative.
       """
       pass

Sphinx Style
~~~~~~~~~~~~

.. code-block:: python

   def sphinx_function(param1, param2):
       """Example function with Sphinx-style docstring.
       
       :param param1: The first parameter
       :type param1: str
       :param param2: The second parameter
       :type param2: int
       :return: True if successful, False otherwise
       :rtype: bool
       :raises ValueError: If param2 is negative
       """
       pass

Advanced Configuration
----------------------

Custom Rendering
~~~~~~~~~~~~~~~~

.. code-block:: python

   # conf.py
   def autoapi_prepare_jinja_env(jinja_env):
       """Customize Jinja environment."""
       jinja_env.globals['custom_filter'] = lambda x: x.upper()

   def setup(app):
       app.connect('autoapi-prepare-jinja-env', autoapi_prepare_jinja_env)

Modify Generated Content
~~~~~~~~~~~~~~~~~~~~~~~~~

.. code-block:: python

   def modify_autoapi_content(app, what, name, obj, options, lines):
       """Modify generated documentation."""
       if what == "class":
           lines.insert(0, ".. note:: This is an auto-generated class.")

   def setup(app):
       app.connect('autoapi-process-docstring', modify_autoapi_content)

Integration Examples
--------------------

With Type Hints
~~~~~~~~~~~~~~~

.. code-block:: python

   from typing import List, Dict, Optional

   class DataProcessor:
       """Process and transform data.
       
       Attributes:
           data: The data to process
           options: Processing options
       """
       
       def __init__(
           self,
           data: List[Dict[str, Any]],
           options: Optional[Dict[str, Any]] = None
       ):
           """Initialize the processor.
           
           Args:
               data: Input data list
               options: Optional configuration
           """
           self.data = data
           self.options = options or {}
       
       def process(self) -> List[Dict[str, Any]]:
           """Process the data.
           
           Returns:
               Processed data list
           """
           return self.data

With Dataclasses
~~~~~~~~~~~~~~~~

.. code-block:: python

   from dataclasses import dataclass, field
   from typing import List

   @dataclass
   class Config:
       """Application configuration.
       
       Attributes:
           name: Application name
           version: Version string
           features: Enabled features
       """
       name: str
       version: str = "1.0.0"
       features: List[str] = field(default_factory=list)

With Async Functions
~~~~~~~~~~~~~~~~~~~~

.. code-block:: python

   async def fetch_data(url: str, timeout: int = 30) -> dict:
       """Fetch data from URL asynchronously.
       
       Args:
           url: The URL to fetch from
           timeout: Request timeout in seconds
       
       Returns:
           The fetched data
       
       Raises:
           TimeoutError: If request exceeds timeout
       """
       pass

Package Structure Example
--------------------------

Complete Package
~~~~~~~~~~~~~~~~

.. code-block:: text

   mypackage/
   ├── __init__.py
   ├── core/
   │   ├── __init__.py
   │   ├── processor.py
   │   └── utils.py
   ├── api/
   │   ├── __init__.py
   │   ├── client.py
   │   └── endpoints.py
   └── exceptions.py

Configuration
~~~~~~~~~~~~~

.. code-block:: python

   # conf.py
   autoapi_type = 'python'
   autoapi_dirs = ['../mypackage']
   autoapi_root = 'api'
   
   autoapi_options = [
       'members',
       'undoc-members',
       'show-inheritance',
       'show-module-summary',
   ]
   
   autoapi_ignore = [
       '*/tests/*',
       '*/__pycache__/*',
   ]

Generated Structure
~~~~~~~~~~~~~~~~~~~

.. code-block:: text

   docs/
   ├── api/
   │   ├── mypackage/
   │   │   ├── index.rst
   │   │   ├── core/
   │   │   │   ├── index.rst
   │   │   │   ├── processor.rst
   │   │   │   └── utils.rst
   │   │   ├── api/
   │   │   │   ├── index.rst
   │   │   │   ├── client.rst
   │   │   │   └── endpoints.rst
   │   │   └── exceptions.rst
   │   └── index.rst
   └── index.rst

Cross-References
----------------

Linking to API
~~~~~~~~~~~~~~

.. code-block:: rst

   See :py:class:`mypackage.core.Processor` for details.
   
   Use :py:func:`mypackage.api.fetch_data` to retrieve data.
   
   Refer to :py:mod:`mypackage.core.utils` module.

Internal Links
~~~~~~~~~~~~~~

AutoAPI generates automatic cross-references:

.. code-block:: python

   class Manager:
       """Manage resources.
       
       Uses :class:`Processor` internally.
       Calls :func:`utils.validate` for validation.
       """
       pass

Customization
-------------

Custom Templates
~~~~~~~~~~~~~~~~

Create ``_templates/autoapi/python/class.rst``:

.. code-block:: jinja

   {{ obj.name }}
   {{ "=" * obj.name|length }}
   
   .. py:class:: {{ obj.id }}
   
      {{ obj.docstring }}
   
      {% if obj.bases %}
      **Bases:** {{ obj.bases|join(', ') }}
      {% endif %}
   
      {% block methods %}
      {% if obj.methods %}
      Methods
      -------
      {% for method in obj.methods %}
      .. automethod:: {{ method.id }}
      {% endfor %}
      {% endif %}
      {% endblock %}

Custom CSS
~~~~~~~~~~

.. code-block:: css

   /* _static/custom.css */
   .autoapi-section {
       border-left: 3px solid #2980b9;
       padding-left: 10px;
   }

Performance Optimization
------------------------

Caching
~~~~~~~

.. code-block:: python

   # Keep generated files for faster rebuilds
   autoapi_keep_files = True

Selective Generation
~~~~~~~~~~~~~~~~~~~~

.. code-block:: python

   # Only generate for specific modules
   autoapi_dirs = ['../mypackage/core']
   
   # Exclude large directories
   autoapi_ignore = ['*/vendor/*', '*/node_modules/*']

Best Practices
--------------

Documentation Quality
~~~~~~~~~~~~~~~~~~~~~

1. Write comprehensive docstrings
2. Include type hints
3. Document parameters and return values
4. Add usage examples
5. Document exceptions

Organization
~~~~~~~~~~~~

1. Use clear module structure
2. Group related functionality
3. Keep public API clean
4. Hide implementation details

Integration
~~~~~~~~~~~

1. Combine with manual documentation
2. Use cross-references
3. Add overview pages
4. Include tutorials


Practical Examples
------------------

Basic Configuration
-------------------

Python Project
~~~~~~~~~~~~~~

.. code-block:: python

   # conf.py
   extensions = [
       'autoapi.extension',
   ]
   
   autoapi_type = 'python'
   autoapi_dirs = ['../mypackage']

Multiple Packages
~~~~~~~~~~~~~~~~~

.. code-block:: python

   autoapi_dirs = [
       '../package1',
       '../package2',
       '../package3',
   ]

Output Configuration
--------------------

Custom Output Directory
~~~~~~~~~~~~~~~~~~~~~~~

.. code-block:: python

   # Generate to custom directory
   autoapi_root = 'api'  # docs/api/
   
   # Default is 'autoapi'

Template Customization
~~~~~~~~~~~~~~~~~~~~~~

.. code-block:: python

   autoapi_template_dir = '_templates/autoapi'

Generation Options
~~~~~~~~~~~~~~~~~~

.. code-block:: python

   # Don't generate if no changes
   autoapi_generate_api_docs = True
   
   # Keep generated files
   autoapi_keep_files = True
   
   # Add to toctree automatically
   autoapi_add_toctree_entry = True

Content Filtering
-----------------

Include/Exclude Patterns
~~~~~~~~~~~~~~~~~~~~~~~~

.. code-block:: python

   # Exclude patterns
   autoapi_ignore = [
       '*/tests/*',
       '*/migrations/*',
       '*/_private/*',
       '*/conftest.py',
   ]

Member Options
~~~~~~~~~~~~~~

.. code-block:: python

   # What to document
   autoapi_options = [
       'members',
       'undoc-members',
       'private-members',
       'show-inheritance',
       'show-module-summary',
       'special-members',
       'imported-members',
   ]

Skip Certain Members
~~~~~~~~~~~~~~~~~~~~

.. code-block:: python

   def skip_member(app, what, name, obj, skip, options):
       """Skip private and test members."""
       if name.startswith('_') and not name.startswith('__'):
           return True
       if name.startswith('test_'):
           return True
       return skip

   def setup(app):
       app.connect('autoapi-skip-member', skip_member)

Python-Specific Options
-----------------------

Type Annotations
~~~~~~~~~~~~~~~~

.. code-block:: python

   # Show type annotations
   autoapi_python_use_implicit_namespaces = True
   
   # Use napoleon for docstrings
   extensions = [
       'autoapi.extension',
       'sphinx.ext.napoleon',
   ]

Import Resolution
~~~~~~~~~~~~~~~~~

.. code-block:: python

   # Python class resolution
   autoapi_python_class_content = 'both'  # 'class', 'init', 'both'

Package Organization
~~~~~~~~~~~~~~~~~~~~

.. code-block:: python

   # Show module summary
   autoapi_member_order = 'groupwise'  # 'alphabetical', 'bysource'
   
   # Show inheritance
   autoapi_options = ['show-inheritance', 'show-module-summary']

Documentation Formats
---------------------

Google Style
~~~~~~~~~~~~

.. code-block:: python

   def example_function(param1, param2):
       """Example function with Google-style docstring.
       
       Args:
           param1 (str): The first parameter.
           param2 (int): The second parameter.
       
       Returns:
           bool: True if successful, False otherwise.
       
       Raises:
           ValueError: If param2 is negative.
       """
       pass

NumPy Style
~~~~~~~~~~~

.. code-block:: python

   def numpy_function(param1, param2):
       """Example function with NumPy-style docstring.
       
       Parameters
       ----------
       param1 : str
           The first parameter.
       param2 : int
           The second parameter.
       
       Returns
       -------
       bool
           True if successful, False otherwise.
       
       Raises
       ------
       ValueError
           If param2 is negative.
       """
       pass

Sphinx Style
~~~~~~~~~~~~

.. code-block:: python

   def sphinx_function(param1, param2):
       """Example function with Sphinx-style docstring.
       
       :param param1: The first parameter
       :type param1: str
       :param param2: The second parameter
       :type param2: int
       :return: True if successful, False otherwise
       :rtype: bool
       :raises ValueError: If param2 is negative
       """
       pass

Advanced Configuration
----------------------

Custom Rendering
~~~~~~~~~~~~~~~~

.. code-block:: python

   # conf.py
   def autoapi_prepare_jinja_env(jinja_env):
       """Customize Jinja environment."""
       jinja_env.globals['custom_filter'] = lambda x: x.upper()

   def setup(app):
       app.connect('autoapi-prepare-jinja-env', autoapi_prepare_jinja_env)

Modify Generated Content
~~~~~~~~~~~~~~~~~~~~~~~~~

.. code-block:: python

   def modify_autoapi_content(app, what, name, obj, options, lines):
       """Modify generated documentation."""
       if what == "class":
           lines.insert(0, ".. note:: This is an auto-generated class.")

   def setup(app):
       app.connect('autoapi-process-docstring', modify_autoapi_content)

Integration Examples
--------------------

With Type Hints
~~~~~~~~~~~~~~~

.. code-block:: python

   from typing import List, Dict, Optional

   class DataProcessor:
       """Process and transform data.
       
       Attributes:
           data: The data to process
           options: Processing options
       """
       
       def __init__(
           self,
           data: List[Dict[str, Any]],
           options: Optional[Dict[str, Any]] = None
       ):
           """Initialize the processor.
           
           Args:
               data: Input data list
               options: Optional configuration
           """
           self.data = data
           self.options = options or {}
       
       def process(self) -> List[Dict[str, Any]]:
           """Process the data.
           
           Returns:
               Processed data list
           """
           return self.data

With Dataclasses
~~~~~~~~~~~~~~~~

.. code-block:: python

   from dataclasses import dataclass, field
   from typing import List

   @dataclass
   class Config:
       """Application configuration.
       
       Attributes:
           name: Application name
           version: Version string
           features: Enabled features
       """
       name: str
       version: str = "1.0.0"
       features: List[str] = field(default_factory=list)

With Async Functions
~~~~~~~~~~~~~~~~~~~~

.. code-block:: python

   async def fetch_data(url: str, timeout: int = 30) -> dict:
       """Fetch data from URL asynchronously.
       
       Args:
           url: The URL to fetch from
           timeout: Request timeout in seconds
       
       Returns:
           The fetched data
       
       Raises:
           TimeoutError: If request exceeds timeout
       """
       pass

Package Structure Example
--------------------------

Complete Package
~~~~~~~~~~~~~~~~

.. code-block:: text

   mypackage/
   ├── __init__.py
   ├── core/
   │   ├── __init__.py
   │   ├── processor.py
   │   └── utils.py
   ├── api/
   │   ├── __init__.py
   │   ├── client.py
   │   └── endpoints.py
   └── exceptions.py

Configuration
~~~~~~~~~~~~~

.. code-block:: python

   # conf.py
   autoapi_type = 'python'
   autoapi_dirs = ['../mypackage']
   autoapi_root = 'api'
   
   autoapi_options = [
       'members',
       'undoc-members',
       'show-inheritance',
       'show-module-summary',
   ]
   
   autoapi_ignore = [
       '*/tests/*',
       '*/__pycache__/*',
   ]

Generated Structure
~~~~~~~~~~~~~~~~~~~

.. code-block:: text

   docs/
   ├── api/
   │   ├── mypackage/
   │   │   ├── index.rst
   │   │   ├── core/
   │   │   │   ├── index.rst
   │   │   │   ├── processor.rst
   │   │   │   └── utils.rst
   │   │   ├── api/
   │   │   │   ├── index.rst
   │   │   │   ├── client.rst
   │   │   │   └── endpoints.rst
   │   │   └── exceptions.rst
   │   └── index.rst
   └── index.rst

Cross-References
----------------

Linking to API
~~~~~~~~~~~~~~

.. code-block:: rst

   See :py:class:`mypackage.core.Processor` for details.
   
   Use :py:func:`mypackage.api.fetch_data` to retrieve data.
   
   Refer to :py:mod:`mypackage.core.utils` module.

Internal Links
~~~~~~~~~~~~~~

AutoAPI generates automatic cross-references:

.. code-block:: python

   class Manager:
       """Manage resources.
       
       Uses :class:`Processor` internally.
       Calls :func:`utils.validate` for validation.
       """
       pass

Customization
-------------

Custom Templates
~~~~~~~~~~~~~~~~

Create ``_templates/autoapi/python/class.rst``:

.. code-block:: jinja

   {{ obj.name }}
   {{ "=" * obj.name|length }}
   
   .. py:class:: {{ obj.id }}
   
      {{ obj.docstring }}
   
      {% if obj.bases %}
      **Bases:** {{ obj.bases|join(', ') }}
      {% endif %}
   
      {% block methods %}
      {% if obj.methods %}
      Methods
      -------
      {% for method in obj.methods %}
      .. automethod:: {{ method.id }}
      {% endfor %}
      {% endif %}
      {% endblock %}

Custom CSS
~~~~~~~~~~

.. code-block:: css

   /* _static/custom.css */
   .autoapi-section {
       border-left: 3px solid #2980b9;
       padding-left: 10px;
   }

Performance Optimization
------------------------

Caching
~~~~~~~

.. code-block:: python

   # Keep generated files for faster rebuilds
   autoapi_keep_files = True

Selective Generation
~~~~~~~~~~~~~~~~~~~~

.. code-block:: python

   # Only generate for specific modules
   autoapi_dirs = ['../mypackage/core']
   
   # Exclude large directories
   autoapi_ignore = ['*/vendor/*', '*/node_modules/*']

Best Practices
--------------

Documentation Quality
~~~~~~~~~~~~~~~~~~~~~

1. Write comprehensive docstrings
2. Include type hints
3. Document parameters and return values
4. Add usage examples
5. Document exceptions

Organization
~~~~~~~~~~~~

1. Use clear module structure
2. Group related functionality
3. Keep public API clean
4. Hide implementation details

Integration
~~~~~~~~~~~

1. Combine with manual documentation
2. Use cross-references
3. Add overview pages
4. Include tutorials

Additional Resources
--------------------
- :doc:`sphinx-automodapi` - Alternative approach
- :doc:`../sphinx-basics` - Learn Sphinx fundamentals
- `AutoAPI Documentation <https://sphinx-autoapi.readthedocs.io/>`_
- `Sphinx autodoc <https://www.sphinx-doc.org/en/master/usage/extensions/autodoc.html>`_
- :doc:`../tutorials/packages/sphinx-autoapi` - Complete tutorial
- GitHub repository: https://github.com/readthedocs/sphinx-autoapi
- vs autodoc: https://sphinx-autoapi.readthedocs.io/

